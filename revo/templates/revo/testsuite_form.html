{% extends "revo/element_form.html" %}
{% load staticfiles%}

{% load widget_tweaks %}
{% block form_title %} Test Suite {% endblock %}

{% block head %} 
    <script src="{% static 'revo/scripts/revo.js' %}"></script>
    <link href="{% static 'revo/css/revo.css' %}" rel="stylesheet"/>
{% endblock %}

{% block form_elem %}
    
    <p>
        {{ form.name.errors }}
        <label for="{{form.name.id_for_label}}" >Name</label>
        {{ form.name | add_class:"form-control input-sm" }}
    </p>
    <p class="hidden">
        {{ form.cases.errors }}
        {{ form.cases | attr:"id:lstBoxMain"}}
    </p>
    <p>
    <div class="col-md-12">
        <div class="col-md-4">
            <div class="subject-info-box-1">
                <label for="{{form.name.id_for_label}}" >Test Cases</label>
                    <div class="case-text scroller main_menu" id="testcases" name="test_case">
                    <select multiple='multiple' id='lstBox1' class='form-control'></select>
                </div>
            </div>
        </div>
        <div class="col-md-4">
            <p>&nbsp;</p>
            <div class="subject-info-arrows text-center">
              <input type='button' id='btnAllRight' value='>>' class=" btn-default" /><br />
              <input type='button' id='btnRight' value='>' class="btn-default" /><br />
              <input type='button' id='btnLeft' value='<' class="btn-default" /><br />
              <input type='button' id='btnAllLeft' value='<<' class="btn-default" />
            </div>
        </div>
        <div class="col-md-4">
            <div class="subject-info-box-2">
                <label for="{{form.name.id_for_label}}" >Test Cases</label>
                <select multiple="multiple" id='lstBox2' class="form-control">
                </select>
            </div>
        </div>
    </div> 

    </p>
    <script type="text/javascript">
            (function () {
                handleTestSuiteCases();
            }(jQuery));
                            function handleTestSuiteCases() {
                    var allOpts = $('#lstBoxMain option');
                    $('#lstBox1').append($(allOpts).clone());
                    var selectedOpts = $('#lstBox1 option:selected');
                    $('#lstBox2').append($(selectedOpts).clone());
                    $(selectedOpts).remove();

                    $('#btnRight').click(function (e) {
                        var selectedOpts = $('#lstBox1 option:selected');
                        if (selectedOpts.length == 0) {
                            alert("Nothing to move.");
                            e.preventDefault();
                        }
                        $('#lstBox2').append($(selectedOpts).clone());
                        $(selectedOpts).remove();

                        selectedOpts.each(function(key,opt) {
                            $('#lstBoxMain option[value="' + opt.value + '"]').prop('selected', true)
                        });
                        e.preventDefault();
                    });
                    $('#btnAllRight').click(function (e) {
                        var selectedOpts = $('#lstBox1 option');
                        if (selectedOpts.length == 0) {
                            alert("Nothing to move.");
                            e.preventDefault();
                        }
                        $('#lstBox2').append($(selectedOpts).clone());
                        $(selectedOpts).remove();
                        selectedOpts.each(function(key,opt) {
                            $('#lstBoxMain option[value="' + opt.value + '"]').prop('selected', true )
                        });
                        e.preventDefault();
                    });
                    $('#btnLeft').click(function (e) {
                        var selectedOpts = $('#lstBox2 option:selected');
                        if (selectedOpts.length == 0) {
                            alert("Nothing to move.");
                            e.preventDefault();
                        }
                        $('#lstBox1').append($(selectedOpts).clone());
                        $(selectedOpts).remove();
                        selectedOpts.each(function(key,opt) {
                            $('#lstBoxMain option[value="' + opt.value + '"]').prop('selected', false)
                        });
                        e.preventDefault();
                    });
                    $('#btnAllLeft').click(function (e) {
                        var selectedOpts = $('#lstBox2 option');
                        if (selectedOpts.length == 0) {
                            alert("Nothing to move.");
                            e.preventDefault();
                        }
                        $('#lstBox1').append($(selectedOpts).clone());
                        $(selectedOpts).remove();
                        selectedOpts.each(function(key,opt) {
                            $('#lstBoxMain option[value="' + opt.value + '"]').prop('selected', false)
                        });
                        e.preventDefault();
                    });
                }
            </script>

            <style>
                #id_cases {
                    display: none !important;
                }
                .subject-info-box-1,
                .subject-info-box-2 {
                    float: left;
                    width: 100%;
                    select{
                        height: 200px;
                        padding: 0;
                        option {
                            padding: 4px 10px 4px 10px;
                        }
                        option:hover {
                            background: #EEEEEE;
                        }
                    }
                }
                .subject-info-arrows {
                    float: left;
                    width: 100%;
                    input {
                        width: 70%;
                        margin-bottom: 5px;
                    }
                }
                select[multiple], select[size] {
                    height: 153px;
                    padding:10px;
                    overflow:auto;
                }
                .btn:not(.btn-link):not(.btn-circle) {
                    box-shadow: 0px !important;
                    border:0px;
                }
                .btn-default{
                    width: 30px;
                    padding: 5px;
                }
                p.device-title{
                    margin-top:15px;
                }
            </style>
{% endblock %}